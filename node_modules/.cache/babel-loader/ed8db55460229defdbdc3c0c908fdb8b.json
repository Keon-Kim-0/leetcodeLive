{"ast":null,"code":"import React,{useEffect,useState}from'react';import{io}from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Chat(){return/*#__PURE__*/_jsxs(\"div\",{id:\"right\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"population\",class:\"population\"}),/*#__PURE__*/_jsx(\"h2\",{id:\"clientName\",class:\"clientName\"}),/*#__PURE__*/_jsx(\"div\",{id:\"container\",class:\"Anchor\",children:/*#__PURE__*/_jsx(\"ul\",{id:\"events\",class:\"chat\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"chatSection\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"chatForm\",class:\"chatForm\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"chat\",type:\"text\",autocomplete:\"off\",class:\"chatbox\",placeholder:\"chat\"}),/*#__PURE__*/_jsx(\"button\",{id:\"say\",class:\"chatButton\",children:\"Send\"})]})})]});}window.onload=function(){var sock=io();var clientid=false;var chatButton=document.getElementById('say');var chatForm=document.getElementById('chatForm');chatForm.addEventListener('submit',function(e){e.preventDefault();chatSend();});function chatSend(){var talk=document.getElementById('chat').value;talk=(clientid+':'+talk).split('').map(function(x,xi){if(xi>0&&xi%28===0){return x+'\\n';}else{return x;}}).join('').slice(clientid.length+1);console.log(talk);sock.emit('chat',talk);document.getElementById('chatForm').reset();}var messengerid='error';sock.on('messenger',function(text){messengerid=text;});var writeEvent=function writeEvent(text){var parent=document.querySelector('#events');var el=document.createElement('li');el.className='chatText';el.innerHTML=text;parent.appendChild(el);var stepParent=el;var messenger=document.createElement('span');messenger.className='messenger';messenger.innerHTML=messengerid;stepParent.insertBefore(messenger,stepParent.childNodes[0]);//messenger.scrollIntoView({behavior:\"smooth\", block: \"end\", inline: \"nearest\"});\n//window.scrollTo(0,document.body.scrollHeight)\nconsole.log('one');scrolly();};var right=document.getElementById('right');var events=document.getElementById('events');var container=document.getElementById('container');window.addEventListener('resize',update);function update(){right=document.getElementById('right');events=document.getElementById('events');container=document.getElementById('container');console.log('updated: ',container.style.paddingBottom);}function scrolly(){if(right.scrollHeight-(right.scrollTop+right.clientHeight)<100){right.scrollTo({top:right.scrollHeight,behavior:'smooth'});}}var blueEvent=function blueEvent(text){var parent=document.querySelector('#events');var el=document.createElement('li');el.className='announcement';el.innerHTML=text;parent.appendChild(el);scrolly();};var createid=function createid(text){clientid=text;//console.log(clientid)\nvar element=document.getElementById('clientName');element.innerHTML='your name: '+text;};var updatePopulation=function updatePopulation(text){//console.log('beep')\nvar element=document.getElementById('population');element.innerHTML=text;};sock.on('announcement',blueEvent);sock.on('message',writeEvent);sock.on('id',createid);sock.on('population',updatePopulation);};","map":{"version":3,"sources":["H:/downloads/Leetcode Live/Leetcode-Live/src/components/Chat.js"],"names":["React","useEffect","useState","io","Chat","window","onload","sock","clientid","chatButton","document","getElementById","chatForm","addEventListener","e","preventDefault","chatSend","talk","value","split","map","x","xi","join","slice","length","console","log","emit","reset","messengerid","on","text","writeEvent","parent","querySelector","el","createElement","className","innerHTML","appendChild","stepParent","messenger","insertBefore","childNodes","scrolly","right","events","container","update","style","paddingBottom","scrollHeight","scrollTop","clientHeight","scrollTo","top","behavior","blueEvent","createid","element","updatePopulation"],"mappings":"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","sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport { io } from 'socket.io-client'\r\n\r\n\r\nexport default function Chat() {\r\n  return (\r\n    <div id=\"right\">\r\n      <h2 id='population' class='population'></h2>\r\n      <h2 id='clientName' class='clientName'></h2>\r\n      <div id='container' class='Anchor'>\r\n        <ul id=\"events\" class='chat'></ul>\r\n      </div>\r\n      <div class=\"chatSection\">\r\n        <form id='chatForm' class='chatForm'>\r\n          <input id='chat' type=\"text\" autocomplete=\"off\" class=\"chatbox\" placeholder=\"chat\" />\r\n          <button id=\"say\" class=\"chatButton\">Send</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nwindow.onload = () => {\r\n  const sock = io();\r\n  let clientid = false\r\n  const chatButton = document.getElementById('say')\r\n  const chatForm = document.getElementById('chatForm')\r\n\r\n  chatForm.addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    chatSend();\r\n  })\r\n\r\n  function chatSend() {\r\n    let talk = document.getElementById('chat').value\r\n    talk = (clientid + ':' + talk).split('').map((x, xi) => {\r\n      if (xi > 0 && xi % 28 === 0) {\r\n        return x + '\\n'\r\n      } else {\r\n        return x\r\n      }\r\n    }).join('').slice(clientid.length + 1)\r\n    console.log(talk);\r\n    sock.emit('chat', talk);\r\n    document.getElementById('chatForm').reset();\r\n  }\r\n  let messengerid = 'error';\r\n  sock.on('messenger', (text) => {\r\n    messengerid = text\r\n  })\r\n\r\n  const writeEvent = (text) => {\r\n    const parent = document.querySelector('#events');\r\n    const el = document.createElement('li');\r\n    el.className = 'chatText'\r\n    el.innerHTML = text;\r\n    parent.appendChild(el)\r\n    const stepParent = el;\r\n    const messenger = document.createElement('span');\r\n    messenger.className = 'messenger'\r\n    messenger.innerHTML = messengerid\r\n    stepParent.insertBefore(messenger, stepParent.childNodes[0]);\r\n    //messenger.scrollIntoView({behavior:\"smooth\", block: \"end\", inline: \"nearest\"});\r\n    //window.scrollTo(0,document.body.scrollHeight)\r\n    console.log('one')\r\n    scrolly()\r\n  };\r\n\r\n\r\n  let right = document.getElementById('right')\r\n  let events = document.getElementById('events')\r\n  let container = document.getElementById('container')\r\n\r\n\r\n  window.addEventListener('resize', update);\r\n  function update() {\r\n    right = document.getElementById('right')\r\n    events = document.getElementById('events')\r\n    container = document.getElementById('container')\r\n    console.log('updated: ', container.style.paddingBottom)\r\n  }\r\n\r\n\r\n  function scrolly() {\r\n    if (right.scrollHeight - (right.scrollTop + right.clientHeight) < 100) {\r\n      right.scrollTo({\r\n        top: right.scrollHeight,\r\n        behavior: 'smooth',\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  const blueEvent = (text) => {\r\n    const parent = document.querySelector('#events')\r\n    const el = document.createElement('li')\r\n    el.className = 'announcement'\r\n    el.innerHTML = text;\r\n    parent.appendChild(el);\r\n    scrolly()\r\n  };\r\n\r\n  const createid = (text) => {\r\n    clientid = text\r\n    //console.log(clientid)\r\n    let element = document.getElementById('clientName')\r\n    element.innerHTML = 'your name: ' + text\r\n  }\r\n\r\n  const updatePopulation = (text) => {\r\n    //console.log('beep')\r\n    let element = document.getElementById('population')\r\n    element.innerHTML = text\r\n  }\r\n  sock.on('announcement', blueEvent);\r\n  sock.on('message', writeEvent);\r\n  sock.on('id', createid)\r\n  sock.on('population', updatePopulation)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}