{"ast":null,"code":"var _jsxFileName = \"H:\\\\downloads\\\\Leetcode Live\\\\Leetcode-Live\\\\src\\\\components\\\\Chat.js\";\nconst origin = window.location.origin;\nimport postscribe from 'postscribe';\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"right\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      id: \"population\",\n      class: \"population\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      id: \"clientName\",\n      class: \"clientName\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"container\",\n      class: \"Anchor\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        id: \"events\",\n        class: \"chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"chatSection\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"chatForm\",\n        class: \"chatForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"chat\",\n          type: \"text\",\n          autocomplete: \"off\",\n          class: \"chatbox\",\n          placeholder: \"chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"say\",\n          class: \"chatButton\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, this);\n}\n_c = Chat;\n\nwindow.onload = () => {\n  const sock = io();\n  let clientid = false;\n  const chatButton = document.getElementById('say');\n  const chatForm = document.getElementById('chatForm');\n  chatForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    chatSend();\n  });\n\n  function chatSend() {\n    let talk = document.getElementById('chat').value;\n    talk = (clientid + ':' + talk).split('').map((x, xi) => {\n      if (xi > 0 && xi % 28 === 0) {\n        return x + '\\n';\n      } else {\n        return x;\n      }\n    }).join('').slice(clientid.length + 1);\n    console.log(talk);\n    sock.emit('chat', talk);\n    document.getElementById('chatForm').reset();\n  }\n\n  let messengerid = 'error';\n  sock.on('messenger', text => {\n    messengerid = text;\n  });\n\n  const writeEvent = text => {\n    const parent = document.querySelector('#events');\n    const el = document.createElement('li');\n    el.className = 'chatText';\n    el.innerHTML = text;\n    parent.appendChild(el);\n    const stepParent = el;\n    const messenger = document.createElement('span');\n    messenger.className = 'messenger';\n    messenger.innerHTML = messengerid;\n    stepParent.insertBefore(messenger, stepParent.childNodes[0]); //messenger.scrollIntoView({behavior:\"smooth\", block: \"end\", inline: \"nearest\"});\n    //window.scrollTo(0,document.body.scrollHeight)\n\n    console.log('one');\n    scrolly();\n  };\n\n  let right = document.getElementById('right');\n  let events = document.getElementById('events');\n  let container = document.getElementById('container');\n  window.addEventListener('resize', update);\n\n  function update() {\n    right = document.getElementById('right');\n    events = document.getElementById('events');\n    container = document.getElementById('container');\n    console.log('updated: ', container.style.paddingBottom);\n  }\n\n  function scrolly() {\n    if (right.scrollHeight - (right.scrollTop + right.clientHeight) < 100) {\n      right.scrollTo({\n        top: right.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n  }\n\n  const blueEvent = text => {\n    const parent = document.querySelector('#events');\n    const el = document.createElement('li');\n    el.className = 'announcement';\n    el.innerHTML = text;\n    parent.appendChild(el);\n    scrolly();\n  };\n\n  const createid = text => {\n    clientid = text; //console.log(clientid)\n\n    let element = document.getElementById('clientName');\n    element.innerHTML = 'your name: ' + text;\n  };\n\n  const updatePopulation = text => {\n    //console.log('beep')\n    let element = document.getElementById('population');\n    element.innerHTML = text;\n  };\n\n  sock.on('announcement', blueEvent);\n  sock.on('message', writeEvent);\n  sock.on('id', createid);\n  sock.on('population', updatePopulation);\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["H:/downloads/Leetcode Live/Leetcode-Live/src/components/Chat.js"],"names":["origin","window","location","postscribe","React","useEffect","useState","Chat","onload","sock","io","clientid","chatButton","document","getElementById","chatForm","addEventListener","e","preventDefault","chatSend","talk","value","split","map","x","xi","join","slice","length","console","log","emit","reset","messengerid","on","text","writeEvent","parent","querySelector","el","createElement","className","innerHTML","appendChild","stepParent","messenger","insertBefore","childNodes","scrolly","right","events","container","update","style","paddingBottom","scrollHeight","scrollTop","clientHeight","scrollTo","top","behavior","blueEvent","createid","element","updatePopulation"],"mappings":"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","sourcesContent":["const origin = window.location.origin;\r\nimport postscribe from 'postscribe';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\n\r\nexport default function Chat() {\r\n  return (\r\n    <div id=\"right\">\r\n      <h2 id='population' class='population'></h2>\r\n      <h2 id='clientName' class='clientName'></h2>\r\n      <div id='container' class='Anchor'>\r\n        <ul id=\"events\" class='chat'></ul>\r\n      </div>\r\n      <div class=\"chatSection\">\r\n        <form id='chatForm' class='chatForm'>\r\n          <input id='chat' type=\"text\" autocomplete=\"off\" class=\"chatbox\" placeholder=\"chat\" />\r\n          <button id=\"say\" class=\"chatButton\">Send</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nwindow.onload = () => {\r\n  const sock = io();\r\n  let clientid = false\r\n  const chatButton = document.getElementById('say')\r\n  const chatForm = document.getElementById('chatForm')\r\n\r\n  chatForm.addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    chatSend();\r\n  })\r\n\r\n  function chatSend() {\r\n    let talk = document.getElementById('chat').value\r\n    talk = (clientid + ':' + talk).split('').map((x, xi) => {\r\n      if (xi > 0 && xi % 28 === 0) {\r\n        return x + '\\n'\r\n      } else {\r\n        return x\r\n      }\r\n    }).join('').slice(clientid.length + 1)\r\n    console.log(talk);\r\n    sock.emit('chat', talk);\r\n    document.getElementById('chatForm').reset();\r\n  }\r\n  let messengerid = 'error';\r\n  sock.on('messenger', (text) => {\r\n    messengerid = text\r\n  })\r\n\r\n  const writeEvent = (text) => {\r\n    const parent = document.querySelector('#events');\r\n    const el = document.createElement('li');\r\n    el.className = 'chatText'\r\n    el.innerHTML = text;\r\n    parent.appendChild(el)\r\n    const stepParent = el;\r\n    const messenger = document.createElement('span');\r\n    messenger.className = 'messenger'\r\n    messenger.innerHTML = messengerid\r\n    stepParent.insertBefore(messenger, stepParent.childNodes[0]);\r\n    //messenger.scrollIntoView({behavior:\"smooth\", block: \"end\", inline: \"nearest\"});\r\n    //window.scrollTo(0,document.body.scrollHeight)\r\n    console.log('one')\r\n    scrolly()\r\n  };\r\n\r\n\r\n  let right = document.getElementById('right')\r\n  let events = document.getElementById('events')\r\n  let container = document.getElementById('container')\r\n\r\n\r\n  window.addEventListener('resize', update);\r\n  function update() {\r\n    right = document.getElementById('right')\r\n    events = document.getElementById('events')\r\n    container = document.getElementById('container')\r\n    console.log('updated: ', container.style.paddingBottom)\r\n  }\r\n\r\n\r\n  function scrolly() {\r\n    if (right.scrollHeight - (right.scrollTop + right.clientHeight) < 100) {\r\n      right.scrollTo({\r\n        top: right.scrollHeight,\r\n        behavior: 'smooth',\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  const blueEvent = (text) => {\r\n    const parent = document.querySelector('#events')\r\n    const el = document.createElement('li')\r\n    el.className = 'announcement'\r\n    el.innerHTML = text;\r\n    parent.appendChild(el);\r\n    scrolly()\r\n  };\r\n\r\n  const createid = (text) => {\r\n    clientid = text\r\n    //console.log(clientid)\r\n    let element = document.getElementById('clientName')\r\n    element.innerHTML = 'your name: ' + text\r\n  }\r\n\r\n  const updatePopulation = (text) => {\r\n    //console.log('beep')\r\n    let element = document.getElementById('population')\r\n    element.innerHTML = text\r\n  }\r\n  sock.on('announcement', blueEvent);\r\n  sock.on('message', writeEvent);\r\n  sock.on('id', createid)\r\n  sock.on('population', updatePopulation)\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}